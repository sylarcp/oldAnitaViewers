<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8">
  <title></title>
  <meta name="GENERATOR" content="OpenOffice.org 2.0  (Linux)">
  <meta name="AUTHOR" content="Predrag Miocinovic">
  <meta name="CREATED" content="20060530;6171400">
  <meta name="CHANGEDBY" content="Predrag Miocinovic">
  <meta name="CHANGED" content="20060530;9061500">
  <style>
	<!--
		H1.heading-2-western { font-family: "Bitstream Vera Serif", serif; font-size: 18pt }
		H1.heading-2-cjk { font-family: "Andale Sans UI"; font-size: 18pt }
		H1.heading-2-ctl { font-family: "Tahoma"; font-size: 18pt }
		P.heading-3-western { font-family: "Bitstream Vera Serif", serif; font-size: 14pt; font-weight: bold }
		P.heading-3-cjk { font-family: "Andale Sans UI"; font-size: 14pt; font-weight: bold }
		P.heading-3-ctl { font-family: "Tahoma"; font-size: 14pt; font-weight: bold }
		P.heading-4-western { font-family: "Bitstream Vera Serif", serif; font-size: 12pt; font-weight: bold }
		P.heading-4-cjk { font-family: "Andale Sans UI"; font-size: 12pt; font-weight: bold }
		P.heading-4-ctl { font-family: "Tahoma"; font-size: 12pt; font-weight: bold }
	-->
	</style>
</head>
<body dir="ltr" lang="en-US">
<h1>ANITA VIEWER HOWTO</h1>
<p>by Predrag Miocinovic, last update <sdfield type="DATETIME"
 sdnum="1033;1033;MM/DD/YY">10/04/06</sdfield></p>
<p class="heading-3-western"><u>Content</u></p>
<ol>
  <li> <a href="#intro">Introduction</a> </li>
  <li> <a href="#2.%20Data%20formats%7Coutline">Data formats</a> </li>
  <li> <a href="#3.%20Menu%20controls%7Coutline">Menu controls</a> </li>
  <li> <a href="#4.%20Data%20interaction%7Coutline">Data interaction</a></li>
</ol>
<h1 class="heading-2-western"><a name="intro"></a>1. Introduction</h1>
<p>Anita Viewer, Aview for short, has been developed to display data
files generated by ANITA experiment. The main program 'AnitaViewer'
is capable of displaying;</p>
<ul>
  <li> RF waveforms and headers </li>
  <li> Acromag housekeeping data (and other data stored in HK packets) </li>
  <li> CPU monitoring data </li>
  <li> Command echoes </li>
</ul>
<p>The associated program 'TrigMon' has similar user interface and
layout as Aview and it is used to display;</p>
<ul>
  <li> SURF housekeeping rates </li>
  <li> TURF trigger rates </li>
</ul>
<p>(The third program 'SlowMo' also has similar interface and layout,
and is used for displaying slow telemetry packets. This program will
not be documented, since experienced user of the other two programs
will have no problem running this one.)<br>
</p>
<p>Both programs can read data from files or request it from Anita
database running on the same or on a remote machine. The programs
communicate with user through pop-up messages, status bars at the
bottom of a window, and a scrollable message window below the data
display. More critical problems (e.g. failed to open selected file,
etc.) will show up as a pop-up, while info messages and less critical
errors will be noted in message window. </p>
<p style="margin-left: 0.79in;"><b>NB:</b><span style="">
Levels of error severity are not sorted out completely, so some
significant errors, like failing to respond to user command to due a
problem encountered, will only show up in message window. They will
be marked as 'Error', though, so it is useful to keep an eye on
messages especially if the program is not responding as expected.</span></p>
<p>When describing behavior, controls, or similar of 'a program' in
this document, it means that it applies to both Aview and TrigMon.
Unique behaviors, etc. will be denoted as such. </p>
<p>To get the programs, you can check out source code from Anita SVN
repository at OSU. Please contact Ryan Nichol on instructions how to
gain access to SVN. The repository you want is 'anitaGround/aview'.
Follow instructions in distribution on how to compile it. At the
moment it compiles on Linux only, but MS Windows version may become
available at the later date. Alternatively, contact me to provide you
with either shared executable (if you have machine with GTK2
installed) or static executable (which will run on any Linux machine,
including the flight computer). At the time of writing, executables
are located on flight computer in /mnt/blade1/programs. </p>
<h1 class="heading-2-western"><a name="2. Data formats|outline"></a>2.
Data formats</h1>
<p>Both programs support three types of data formats;</p>
<ul>
  <li> Raw format of RF events and rate files generated by Shige's
'crate_eval' </li>
  <li> Flight data format used by Acqd (either gzipped or not)<br>
  </li>
  <li> SQL database format </li>
</ul>
<p> To access data in different formats use different menu option
which will be described below. </p>
<h1 class="heading-2-western"><a name="3. Menu controls|outline"></a>3.
Menu controls</h1>
<ul>
  <li> <a href="#Accessing%20data%7Coutline">Accessing data</a> </li>
  <li> <a href="#browse">Browsing data</a> </li>
  <li> <a href="#Database%20interaction%7Coutline">Database interaction</a>
  </li>
  <li> <a href="#Options">Options</a> </li>
</ul>
<p>Some menu items have accelerator (a.k.a 'hot') keys associated
with them. They are shown at the right of a menu item and can be used
if the window focus is on the main program window. Menu item action
is described in more detail in leftmost status bar at the bottom of
the main window when menu items is highlighted. </p>
<h1 class="heading-2-western"><a name="Accessing data|outline"></a>Accessing
data</h1>
<p>Data is accessed through menu controls. Every time a data file is
successfully opened, all files of the same type in the chosen
directory will be indexed and made available for <a href="#browse">browsing</a>,
i.e. you will not need to explicitly open another file to access
data, although you're free to do so. The directory will now also be
monitored for appearance of new files of the same type which will
also be added to list for <a href="#browse">browsing</a>.</p>
<p>When connected to database, the program will retrieve the full
list of all data packets available in the database, which will all be
available for browsing. As the database is being filled, it will
communicate this to all connected programs and new packets will be
indexed and made available for <a
 href="#Database%20interaction%7Coutline">browsing
and direct access</a>. </p>
<p>Whenever a new data is successfully read or received from DB, it
will be noted in the middle status bar at the bottom of the main
window. E.g. 'HD 234' will mean RF event header (and waveforms if
available) with event number 234 was read in, and 'HK 114345678' will
mean that Acromag HK packet with timestamp 114345678 was read in,
etc. </p>
<p class="heading-4-western"><a name="rawdatainput"></a>Raw
data files</p>
<p>In <b>Aview</b>, raw RF data is accessed through 'Raw
data'-&gt;'Open'. Select a raw header file to open. If read properly,
Aview will attempt to load event file with same event number from the
same directory. If pedestals are available waveform data will be
calibrated and rotated, if not it will only be rotated. The pedestals
are loaded by 'Raw Data'-&gt;'Load pedestals'. The pedestal format
can be either Shige's array of unsigned shorts with dimensions
[9][9][4][260], or Ryan's array of floats with dimensions
[9][4][9][260]. Aview recognizes format by the expected length of the
pedestal file. If no pedestals are loaded, <span
 style="font-weight: bold;">Aview</span> will try to load <span
 style="font-family: monospace;">latestAcqdPeds.dat</span> file from
the working directory. <br>
</p>
<p>In <b>TrigMon</b>, raw TURF data is accessed through 'TURF
data'-&gt;'Open raw', while SURF data is accessed through 'SURF
data'-&gt;'Open raw'. Once a TURF or SURF file is opened the rest of
raw files in the directory will be indexed. You can open and browse
both types of files concurrently. </p>
<p class="heading-4-western">Flight data files</p>
<p>In <b>Aview</b><span style="">, flight format
files are accessed through 'Flight data'-&gt;'Open XXX' where XXX can
be RF, HK, GPS, monitor or cmd. Both zipped and unzipped files can be
read. The programs assumes 100 events per RF file and 1000 events per
file for all other data types.<br>
</span></p>
<p style="">If RF header is opened, Aview will try
to open associated waveform file and locate the corresponding event.
For pedestals, you can load flight format pedestals with 'Flight
Data'-&gt;'Load pedestals', or use raw pedestal formats described in <a
 href="#rawdatainput">raw
data files</a> subsection. </p>
<p style="">On opening housekeeping file, Aview
will try to locate associated housekeeping calibration file. If it
fails (due to inconsistent directory naming), load calibration file
manually through 'Flight data'-&gt;'Load HK Calib'. Once loaded,
calibration constant will be used for the remainder of the session.
You can override them by loading new calibrations manually. </p>
<p style="">On opening any file, Aview will try to
index all files of the same type based on flight data directory
structure. For RF, HK, monitor and command, this means all the files
in the same directory. For GPS files, it will try to located all
other GPS file data types and index them as well. </p>
<p style="">In <b>TrigMon</b>, TURF flight data is
accessed by 'TURF data'-&gt;'Open', while SURF data is accessed by
'SURF data'-&gt;'Open'. Opening a file, will index the rest of the
files of the same type in the given directory. </p>
<h1 class="heading-2-western"><a name="browse"></a>&nbsp;Browsing data
files</h1>
<ul>
  <li> <a href="#Using%20Control%20Panel%7Coutline">Using Control Panel</a>
  </li>
</ul>
<p>Data can be browsed using menu controls or through 'Control Panel'
(but not for raw data in Aview). </p>
<p class="heading-4-western">Raw data files</p>
<p>In <b>Aview</b><span style="">, raw data files
can be browsed with 'Raw data'-&gt;'Next' and 'Raw
data'-&gt;'Previous'.
This will load next or previous RF event based on sorted list of
header files found in the directory. Files are expected to be of form
'*.&lt;num&gt;' and are sorted by the extension value. You can use
'Raw data'-&gt;'Start' and 'Stop' to automatically load next event
based on specified delay (see '<a href="#Options">Options</a>',
default is 2 seconds). </span>
</p>
<p style="">In <b>TrigMon</b>, raw data can be
browsed with 'TURF data'-&gt;'Next' and 'Previous' and with 'SURF
data'-&gt;'Next' and 'Previous'. At the moment both 'SURF data' and
'TURF data' have 'Start' and 'Stop' options which can be used to load
next event automatically, but these will disappear and functionality
will be moved to '<a href="#Using%20Control%20Panel%7Coutline">Control
Panel</a>'. Also, you can open 'Control'-&gt;'Control Panel' and use
it to browse raw events. </p>
<p class="heading-4-western">Flight data files</p>
<p>In <b>Aview</b><span style="">, flight data can
be browsed with 'Flight data'-&gt;'Next XXX' and 'Previous XXX',
where XXX can again be RF, HK, GPS, monitor or cmd. These menu items
are just links to corresponding functions in '<a
 href="#Using%20Control%20Panel%7Coutline">Control
Panel</a>' described below. Using 'Next GPS' or 'Previous GPS' will
only change the GPS location file designated as primary, either ADU5
PAT or G12 POS (see '<a href="#Options">Options</a>'). </span>
</p>
<p style="">In <b>TrigMon</b>, flight data files
are browsed just like raw files, described above.</p>
<p class="heading-3-western"><a name="Using Control Panel|outline"></a>
Using Control Panel</p>
<p>Control panel is a dialog window accessed in Aview by 'Flight
data'-&gt;'Control Panel' and in TrigMon by 'Control'-&gt;'Control
Panel'. It consists of identical file/packet control lines for all
data types understood by the program (9 for Aview, 2 for TrigMon).
Left to right, each line contains;</p>
<ul>
  <li>
    <p>Identifier of packet type controlled; for RF events headers are
considered primary packets and corresponding waveforms are
automatically loaded if available. You can not load waveform file
directly. However, headers can be browsed without waveform loading) if
you use 'Header' packet interface.<br>
    </p>
  </li>
  <li>
    <p>UTC time of last data loaded, down to a second. If data rate is
higher that 1 Hz, all data from the same second will have same time here</p>
  </li>
  <li>
    <p>'&lt;' button which loads preceding event</p>
  </li>
  <li>
    <p>'&gt;' button which loads next event</p>
  </li>
  <li>
    <p>'select' button which opens dialog with all files of give type
which are indexed; if necessary, i.e. if more than one event is
expected per file, another dialog is opened to specify order of the
event in the selected file. </p>
  </li>
  <li>
    <p>'auto' checkbox which controls whether to load last known event
automatically after some delay (see '<a href="#Options">Options</a>',
default 2 seconds)</p>
  </li>
</ul>
<p>Pressing '&lt;' or '&gt;' will move to previous or next event in
current directory. If only one event is expected per file (i.e. file
not zipped), it will move to last or next file, sorted according to
the time encoded in the file name or the event number in the case of
headers. If multiple events per file are expected (i.e. for zipped
files) it will move to previous or next event in the file (without
checking its timestamp or event number). If the end or the beginning
of the file is reached, it will move to next or previous file, again
sorted in the same way as unzipped files. </p>
<h1 class="heading-2-western"><a name="Database interaction|outline"></a>Database
interaction</h1>
<ul>
  <li><a href="#Connecting_to_database">Connecting to database</a></li>
  <li><a href="#Accessing_database_data">Accessing database data</a></li>
  <ul>
    <li><a href="#Accessing_configuration_and_log_files">Accessing
configuration and log files</a><br>
    </li>
  </ul>
  <li><a href="#Clearing_database_connection">Clearing database
connection</a></li>
  <li><a href="#Indexing_database_packet_tables">Indexing database
packet tables</a></li>
  <li><a href="#SQL_terminal_interface">SQL Terminal interface</a><span
 style="font-weight: bold;"></span></li>
</ul>
<span style="font-weight: bold;"><span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span></span>Aview and TrigMon can
access PostgreSQL database on a local or a remote server in order to
retrieve data packets stored by GSE data unpacking daemon. Since the
data is stored in a relational database, this allows for&nbsp; easier
browsing&nbsp; of events and for <a href="#graph">displaying time
history of any variable in the data set</a>. <br>
<h3><a name="Connecting_to_database"></a>Connecting to database</h3>
To connect to a database, select 'DB Data'-&gt;'Connect' which provides
a dialog requesting DB server name, account authorization for
connection, and the name of the database. The username and password
depend on the setup of database server, but, in general, you should be
able to use default parameters provided. Success (or failure) of the
connection attempt will be displayed in right most status bar at the
lower right corner of the GUI. <br>
On a successful connection, the packet tables in the database will be <a
 href="#Indexing_database_packet_tables">indexed</a>.&nbsp; This can
take up to few minutes depending on the amount of data stored in the
database. Indexing is necessary in order to provide random access to
all data available in the database through the GUI interface. The
progress of the indexing is displayed in the middle status bar at the
bottom of the GUI window. GUI will receive user commands during while
waiting to receive indexing information from the database server, but
any database queries initiated by the user will not be executed until
the indexing is completed.<br>
To disconnect from the database, select 'DB Data'-&gt;'Disconnect'.<br>
<h3><a name="Accessing_database_data"></a>Accessing database data</h3>
The primary interface to the database is through DB control panel ('DB
Data'-&gt;'Control Panel'), which has the same interface as flight data
<a href="#Using%20Control%20Panel%7Coutline">control panel</a>. One
additional feature of DB control panel is that packet time field can be
edited in order to retrieve packet data with the given time stamp.
Enter the time you wish and hit enter. If no packet has given
timestamp, packet with next lowest timestamp will be returned. If more
that one packet has the same timestamp (i.e. if data is recorded at
more than 1 Hz), the exact packet returned is unspecified. <br>
If the data packet displayed did not pass telemetry checksum check, its
time field in the control panel will have gray background. This is an
indication that you should not fully trust the data displayed.<br>
<br>
In addition to DB control panel, RF events can be browsed using 'DB
Data'-&gt;'Next Event' and 'DB Data'-&gt;'Previous Event', or a
specific event can be accessed using its event number through 'DB
Data'-&gt;'Open Event'.<br>
<h4><a name="Accessing_configuration_and_log_files"></a>Accessing
configuration and log files</h4>
Configuration and log files stored in the database can be viewed with
'Config Viewer', which is accessed through 'DB Data'-&gt;'Config
Viewer'. Selecting file type from a pop-up list will retrieve the
latest file of that type in the database. You can type in the UTC time
for which you want the file,&nbsp; and file with the highest timestamp
preceding the selected time will be&nbsp; shown.&nbsp; If you 'lock
time',&nbsp; then on selecting the different file type it will show the
latest file preceding that time instead of the latest file in the
database. Finally, '&lt;','&gt;' buttons will let you look at previous
and next files in the database, sorted by timestamps.<br>
<h3><a name="Clearing_database_connection"></a>Clearing database
connection</h3>
There is a chance that database connecting will hang (i.e. database
query takes a very long time to return). You can clear database query
queue and reset database connection with 'DB Data'-&gt;'Clear queue'. <br>
<h3><a name="Indexing_database_packet_tables"></a>Indexing database
packet tables</h3>
In order to gain full access to all data in the database through GUI
interface, the GUI needs to index all data packets in database tables. <span
 style="font-weight: bold;">TrigMon</span> will index all packets after
successful database connection. Due to the strain full indexing by <span
 style="font-weight: bold;">Aview</span> would place onto database, <span
 style="font-weight: bold;">Aview</span> will request only a fraction
of data packets available in the database. It will request following
number of most recent packets;<br>
<table style="text-align: left; width: 591px; height: 345px;" border="2"
 cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; text-align: center;">Packet type<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Number
requested<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RF Event<br>
      </td>
      <td style="vertical-align: top;">2000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Event Header<br>
      </td>
      <td style="vertical-align: top;">10000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Housekeeping<br>
      </td>
      <td style="vertical-align: top;">10000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Monitor<br>
      </td>
      <td style="vertical-align: top;">50000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">GPS ADU5 Pat<br>
      </td>
      <td style="vertical-align: top;">50000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">GPS ADU5 Vtg<br>
      </td>
      <td style="vertical-align: top;">50000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">GPS ADU5 Sat<br>
      </td>
      <td style="vertical-align: top;">50000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">GPS G12 Pos<br>
      </td>
      <td style="vertical-align: top;">50000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">GPS G12 Sat<br>
      </td>
      <td style="vertical-align: top;">50000<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Command Echo<br>
      </td>
      <td style="vertical-align: top;">50000<br>
      </td>
    </tr>
  </tbody>
</table>
Depending on telemetry rates this could correspond to about 40 minutes
(for 2000&nbsp; waveforms during LOS)&nbsp; or more than 15 hours (for
50000 GPS packets). <br>
If you need to access data from earlier time period, you can initiate
retrograde indexing off all packets available in the database through
'DB Data'-&gt;'Index all packets'. Retrograde indexing will retrieve
additional packets (in chunks listed in the table above) once per
minute. You may stop retrograde indexing through 'DB Data'-&gt;'Stop
indexing'. It can be later restarted again by 'DB Data'-&gt;'Index all
packets'. <span style="font-weight: bold;"><br>
WARNING: </span>Such retrograde indexing will put a big strain on a
database server that is receiving data at LOS rates and is <span
 style="font-weight: bold;">discouraged</span> unless you have a great
need to access older data. During TDRSS portion of the flight, a
database server will not be pressed to keep up with the telemetry rate,
but at the same time, the initial indexing at the startup time will
provide greater lookback time period (by a factor of ~30).<br>
<h3><a name="SQL_terminal_interface"></a>SQL terminal interface<br>
</h3>
For testing and debugging purposes, and in order to display variables
which have not been assigned to graphical display, there is a SQL
command line level interface to database. Select 'DB
Data'-&gt;'Terminal' in order to open a new window in which you can
execute SQL commands on the remote database. Enter SQL commands in
entry field at the bottom, click on 'Send', and your SQL query will be
submitted to the database server. Note that GUI interface to database
is only authorized to view, but not change content of the database. The
server response on query will be shown in the text field above command
entry field. The text field can be erased by clicking on 'Clear'
button. Last command sent is recorded by the DB terminal interface and
can be recalled with up arrow key. <br>
All tables and variables in ANITA database are posted <a
 href="http://www.phys.hawaii.edu/%7Epredrag/post/anita/gse_programs/AnitaDatabaseLayout.html">here</a>.
Introductory SQL tutorials are available from <a
 href="http://www.w3schools.com/sql/default.asp">W3Schools.com</a>, <a
 href="http://www.sqlcourse.com/">SQLcourse.com</a>, and <a
 href="http://www.geocities.com/SiliconValley/Vista/2207/sql1.html">James
Hoffman</a>. Keep in mind that you are only allowed to execute SELECT
statements from GUI. More formal documentation on PostgreSQL is <a
 href="http://www.postgresql.org/docs/7.4/static/index.html">here</a>.<br>
<br>
<h1 class="heading-2-western"><a name="Options"></a>Options</h1>
<ul>
  <li> <a href="#rangeedit">Range editing</a> </li>
  <li> <a href="#rfopt">RF options</a> </li>
  <li> <a href="#otheropt">Other options</a> </li>
  <li> <a href="#Saving_and_loading_options">Saving and loading option
files</a> </li>
</ul>
<p style="">In <b>Aview</b><span style="">, option dialog
is accessed through 'Control'-&gt;'Options'. In </span><b>TrigMon</b><span
 style="">,
there are two option dialogs, one for TURF data display
('Control'-&gt;'TURF options') and one for SURF data display
('Control'-&gt;'SURF options').&nbsp; </span>Main Aview options dialog
is subdivided into
tabs, which will be described in detail at later time (but are
hopefully understandable).<br>
</p>
<p class="heading-3-western"><a name="rangeedit"></a>Range editing</p>
<p>Many variables displayed (either as text or or as bar graph) will
have a color based on their value, based on the idea that out of
range, faulty, or dangerous variable values should stand out. Thus,
each color coded variable is associated with value range
specification and this specification can be edited. The range
specification is a list of ranges, i.e. [low,high) value, and the
color associated with that range. Specification editing dialog, lists
ranges currently set for the variable. You can 'Edit' and 'Remove',
by selecting it and clicking on corresponding button, or 'Add' a new
range. If you chose to edit, a subdialog will open allowing you to
enter lower and upper range boundary, and to change the color (click
on colored field). </p>
<p style="margin-left: 0.79in;"><b>NB:</b><span style="">
Program makes no checks on whether ranges overlap or if they cover
all possible variable values. The program will match variable value
against range specification, starting from the first one listed, not
by range with highest or lowest values. Once the variable is found to
be in the range, it will stop searching and apply the color given. If
no range matches variable value, the value will be displayed in red
(0xFF0000).</span></p>
<p style="">The variables displayed as colored
bars also have upper and lower range of bar display, which is set in
top range editing dialog. If variable value falls below the lower bar
range, it will not be visible. If it exceeds the upper range, it the
bar will be completely filled. In addition the bars can have either
linear or logarithmic scaling, and the upper and lower ranges
correspond to limit values in given scaling; e.g. [0,3] range in log
scale is same as [1,1000] range in linear scale. Zero values are
converted to '-999' in logarithmic scaling. Finally,&nbsp; you can have
variable displayed as a running average of N last values reported.<br>
</p>
<p style="">Any changes made in range editing
dialogs will not take effect until 'OK' is pressed in top most
options dialog; i.e. if you 'OK' your changes in range editing
dialog, but 'Cancel' top options dialog, no changes will take effect.
</p>
<p class="heading-3-western"><a name="rfopt"></a>RF options</p>
<p>All options for display of RF data are accessed through 'RF View'
tab in Aview options dialog. You can chose following;</p>
<ul>
  <li> RF Overview Display </li>
  <ul>
    <li> Surf – Shows all waveforms in small graphs at the same time,
ordered by SURF number </li>
    <li>Phi - Shows all waveforms in small graphs at the same time,
ordered by Phi sectors<br>
    </li>
    <li> Payload – Shows interactive display of Anita </li>
  </ul>
  <li> Payload Style </li>
  <ul>
    <li> Mesh – Antennas displayed as wire mesh of edges </li>
    <li> Solid – Antennas displayed as opaque objects </li>
  </ul>
  <li> RF color reference</li>
  <ul>
    <li>RMS – Use waveform peak value relative to RMS to color code
antennas</li>
  </ul>
  <ul>
    <li>Absolute - Use waveform peak absolute value to color code
antennas</li>
  </ul>
  <li>RF view defaults; which graphs to be shown by default when
single waveform is selected for display</li>
  <ul>
    <li> Voltage – raw voltage as read in (but calibrated if pedestals
available)</li>
  </ul>
  <ul>
    <li> FFT – FFT power in dBm/MHz assuming 50 Ohm coupling</li>
  </ul>
  <ul>
    <li> Power – Hilbert transform waveform envelope power in sigma
above noise level (determined from first 1/3 of the waveform)<br>
    </li>
  </ul>
  <li>RF Tab View; which graph to show in RF tabs<br>
  </li>
  <ul>
    <li>Voltage - Waveform voltage</li>
    <li>FFT - FFT power in dBm/MHz assuming 50 Ohm coupling</li>
    <li>Power – Hilbert transform waveform envelope power in sigma
above noise level (determined from first 1/3 of the waveform)</li>
  </ul>
  <li>RF tab scale; vertical scale (+/-) for small graphs in RF Tab
view</li>
  <li> Clock RF tab scale; clock waveforms can have different vertical
scale for clarity</li>
  <li> RF Clock; whether to display SURF channel 9, reference clock
waveforms</li>
  <li>Compass; whether to display directional compass in payload view</li>
  <li>Trigger Level Color; edit color used in RF tab and Payload view
to denote antenna contributing to given trigger level.<br>
  </li>
</ul>
<p class="heading-3-western"><a name="otheropt"></a>Other options</p>
<p>Other options are found on 'Misc' tab of Aview options dialog.</p>
<ul>
  <li> Autoload delay; time to wait before next event is
loaded in automatic read mode </li>
  <li> Default GPS; which GPS to use to display location
and speed in the main window (all other GPS info, from all GPS
packets/files is in a <a href="#GPS%20data%7Coutline">separate window</a>)</li>
  <li>Event rate update step; how often to request current event rate
from the database. This number also sets event rate time integration
step. If you want to average over a longer timer period, but update
more frequently, you can adjust running average.<br>
  </li>
  <li>Edit event rate; allows to <a href="#rangeedit">configure
display parameters</a> for event rate display.</li>
  <li>SQL dump; whether do display all SQL queries sent in the message
window. Useful for debugging SQL interface, but can obscure important
error messages.<br>
  </li>
</ul>
<h3 =""><a name="Saving_and_loading_options"></a>Saving and loading
options</h3>
<p>In both <b>Aview</b> and <b>TrigMon</b>, all
configurable display options can be saved through 'Control'-&gt;'Save
options' and loaded through 'Control'-&gt;'Load Options'. The options
will be saved in XML format. Each programs has its own XML options
structure described in DTD files 'aviewrc.dtd' and 'trigmon.dtd'. You
can edit options XML file and loaded it into program. This is a
quickest way to make large changes to program behavior, since editing
all variable displays through option dialogs can get very tedious.</p>
<p style="">The options file can be loaded at
startup by either using '-o &lt;filename&gt;' command line flag or by
naming the file 'default.arc' or 'default.trc' for Aview and TrigMon,
respectively, and keeping it in the current directory from which a
program is invoked. </p>
<h1 class="heading-2-western"><a name="4. Data interaction|outline"></a>
4. Data interaction</h1>
<ul>
  <li> <a href="#graph">Graph interaction</a> </li>
  <li> <a href="#rfover">RF overview</a> </li>
  <li> <a href="#rfwv">RF waveforms</a> </li>
  <ul>
    <li><a href="#dump">RF dumping</a></li>
  </ul>
  <ul>
    <li><a href="#RF_averaging">RF averaging</a></li>
  </ul>
  <li><a href="#Trigger_Pattern_Histogram">Trigger Pattern Histogram</a><br>
  </li>
  <li><a href="#Current_event_rate">Current event rate</a><br>
  </li>
  <li><a href="#masks">Masks</a><br>
  </li>
  <li> <a href="#GPS%20data%7Coutline">GPS data</a> </li>
  <li><a href="#timeconversion">Time conversion tool</a><br>
  </li>
</ul>
<span style="font-family: &quot;bitstream vera serif&quot;,serif;"><span
 style="font-weight: bold;"></span></span>In <span
 style="font-weight: bold;">Aview</span>, data is displayed in two main
sections; (i) the RF overview which displays either ANITA payload or
small graphs with condensed waveforms, 'RF tabs';&nbsp; (ii)&nbsp; RF
trigger and housekeeping summery at the top and right. In <span
 style="font-weight: bold;">TrigMon</span>, the upper part of the main
window displays TURF rates, while the lower displays SURF housekeeping
data. SURF hk data is displayed on three separate tabs; RF power,
scalers, and thresholds. The RF power tab also contains other
information from SURF hk file, like trigger band mask for each surf,
global threshold, etc. <br>
<br>
Aside from RF waveform data displays which are described <a
 href="#rfover">below</a>, all other variables are displayed in one of
three ways; fixed text, color-coded text, or color-coded bars. Example
of fixed-text would be event number or payload GPS location, example
of&nbsp; color-coded text are voltages and currents&nbsp; drawn, and
bars&nbsp; display temperatures,&nbsp; trigger rates, etc.&nbsp; Almost
every variable displayed in either program can be<br>
double-clicked on to open a graph of this variable's history, showing
the last 100 values displayed. Note that you have to double-click on
variable value, not the variable label. Next subsection describes how
to use the graph dialog.<br>
<h3><a name="graph"></a>Graph interaction</h3>
Graphs will be labeled in the window caption with a more descriptive
description of variable plotted than what is sometimes possible in the
main window due to space restrictions.&nbsp; Placing a mouse on x- or
y- axis labels will open a tooltip with units involved, e.g.. 'V' or
'deg
C'. <br>
You can zoom the graph by pressing a left (x-axis zoom) or right
(y-axis zoom) mouse button and dragging it to select zoom window.
Middle button resets the zoom. Finally, you can get a cross-hair marker
to accurately read of a value from a graph by holding down SHIFT key and<br>
moving the mouse the point of interest. The (x,y) coordinates under the
pointer will be shown in upper right corner.<br>
<br>
Each graph dialog has an interface to query database for entries of the
associated variable. This allows for in depth analysis of the variable
record. One needs to provide reference UTC time and length of time
interval of interest; negative interval for times preceding the
reference and positive for times after the reference. Click on request
to retrieve the data from the database. For convenience, "UTC Now"
button will fill current UTC time into time reference field. <br>
<br>
<h3><a name="rfover"></a>RF overview</h3>
RF waveform data is summarized in one of two ways; either in Payload
View or in Surf/Phi view. <br>
<h4>Payload view</h4>
Payload view shows ANITA antenna configuration which can be rotated,
zoomed or translated;<br>
<ul>
  <li>to rotate; hold down left button and drag the mouse</li>
  <li>to zoom in; left click</li>
  <li>to zoom out; right click</li>
  <li>to adjust zoom; hold down middle button and move the mouse up or
down</li>
  <li>to translate payload; hold down right button and drag the mouse</li>
  <li>to reset all motion; middle click<br>
  </li>
</ul>
Each antenna's ridges and veto antennas will be color coded according
to peak voltage in the associated waveform. The colors can be set by
user, but by default got from light gray for weak signals to bright red
for strong signals. The
antennas contributing to trigger are colored depending on the highest
trigger level they contribute to. To open a
waveform associated with an antenna click near the antenna feedpoint
(not the ridge!), while holding down SHIFT button. Left click for
horizontal polarization and right click for vertical polarization. For
veto antennas, click either button. The arrow in the center of the
payload marks the direction of the phi sector 2 (ADU5 fore direction). 
The optional compass
around the payload shows the payload orientation by superimposing true
geographic azimuth directions based on heading information from ADU5
GPS.<br>
The clock samples from each SURF (ch9) and all waveforms in L3 trigger
are shown to the right of the
payload in RF tab format. <br>
<h4>Surf View<br>
</h4>
Surf view shows all waveforms at once, each one compressed to about
50 points. The waveforms are arranged as if one were looking at the
flight cPCI crate, with SURF 1 channel 8 in the upper left corner and
SURF 9 channel 1 in the lower right, i.e. one SURF per column. Within
each column, the channels are arranged from 8 to 1, with channel 9
(clock
samples) is at the top. If you place a mouse pointer over a RF tab,
it will show tooltip with SURF, channel number, and location of antenna
producing this waveform. Channels contributing to the trigger will be
color coded, depending on the highest level of trigger contribution.
Click on any RF tab
to open full waveform display. If viewing waveforms from the database,
the RF tab<br>
background could be dark gray instead of black. This indicates that the
waveform in question did not pass telemetry checksum check and should
not be fully trusted.<br>
<h4>Phi View</h4>
Phi view is similar to Surf view, but small graphs are ordered by phi
sectors. This is essentially flat view of Anita payload; top tier
antenna 1, horizontal channel is in the upper left corner, while bottom
tier antenna 16, vertical channel is&nbsp; in the lower right corner. <br>
<br>
<h3><a name="rfwv"></a>RF waveforms</h3>
RF waveform dialog subwindow shows up to three graphs; <br>
<ul>
  <li>calibrated waveform voltage (or raw ADC counts if pedestals not
loaded)</li>
  <li>FFT power per frequency in dBm/MHz&nbsp; assuming&nbsp; 50 Ohm
load</li>
  <li>Power of waveform envelope&nbsp; (based on Hilbert transform) in
mW assuming 50 Ohm load</li>
</ul>
Each graph is opened and closed by selecting checkboxes at the top of
the dialog. Every graph can be controlled as described <a href="#graph">above</a>.
Above graphs, RMS voltage and Noise to average Noise power Ratio (NNR)
are displayed. The NNR is calculated by dividing mean noise power in
first third of the waveform by some average expected noise power. The
expected noise power can be either average noise power in given RF
channel in all viewed events, or it can be loaded from SURF
housekeeping file ('Flight Data'-&gt;'Load dBm References'), or it can<br>
be loaded from the database ('DB Data'-&gt;'Load dBm References').
Loading RF power values from SURF housekeeping or database will
override noise power
averaging values. <br>
Either of these reference power levels can be cleared through&nbsp;
'Control'-&gt;'Clear dBM references' or 'Control'-&gt;'Clear RF&nbsp;
power references'. <br>
<h4><a name="dump"></a>RF dumping</h4>
Currently displayed waveform data can be saved in a file through
'Control'-&gt;'Dump RF'. Each waveform is sequentially written to a
file starting with SURF 1 channel 1 and going to SURF 9 channel 9. Each
waveform has 260 float samples.&nbsp; <br>
<h4><a name="RF_averaging"></a>RF averaging</h4>
All waveforms in a single flight data format event file can be averaged
using 'Flight data'-&gt;'Average waveform' menu item. Aview will load
all events it find in the specified file and calculate, for each RF
channel, average waveform, average FFT, and average power envelope.<br>
Also you can average consecutive waveforms from the database with 'DB
data'-&gt;'Average waveforms'. You need to enter time reference, length
of time over which to average, and maximum number of waveforms (up to
100) to average if in a given time window large number of events is
present. Additionally, you can subselect which waveforms to use by
providing<br>
SQL filter which is run on associated waveforms event header. For
example, to average noise only events try to subselect priority 9
events (enter <span style="font-family: monospace;">priority=9</span>
into SQL filter field), or to average only waveforms from phi sector 5
triggers you could try
filter <span style="font-family: monospace;">(l3trigpat &amp; 32)&gt;0</span>.
Full list of variables on which filter can be applied is <a
 href="http://www.phys.hawaii.edu/%7Epredrag/post/anita/gse_programs/AnitaDatabaseLayout.html#hd">here</a>.
<h3><a name="Trigger_Pattern_Histogram"></a>Trigger Pattern Histogram</h3>
Trigger pattern histogram is opened with 'Control'-&gt;'Trigger
Pattern' and it displays cumulative trigger pattern for all observed RF
events. It shows all trigger levels by phi sector, so it maps L1
antenna triggers to the phi sector centered on that antenna. You have
an option to clear accumulated trigger pattern statistics, or to
request trigger pattern statistics from any time period if you are
connected to database. In addition to specifying the reference time and
length of record to retrieve, you have an option to give an SQL filter
to subselect only certain events to generate trigger pattern. For
example, you can select to look at only priority 1 events (enter <span
 style="font-family: monospace;">priority=1</span> into SQL filter
field) or range of priorities (for example enter <span
 style="font-family: monospace;">priority&gt;5 AND priority&lt;9</span>
into SQL filter field). Full list of variables on which filter can be
applied is <a
 href="http://www.phys.hawaii.edu/%7Epredrag/post/anita/gse_programs/AnitaDatabaseLayout.html#hd">here</a>.
<br>
<h3><a name="Current_event_rate"></a>Current event rate</h3>
If AnitaViewer is connected to database it will periodically request
current event rate. This rate is shown on a gauge below queue status
display. The event rate is calculated from the latest header packet
received, looking backward in time by some amount specified by GUI
(default is 30 seconds). Note that in the event that data taking stops,
this event rate will not go to zero, since it is calculated from the
last received header packet.<br>
<h3><a name="masks"></a>Masks</h3>
There are several masks in the data stream and they are displayed
differently;<br>
<ul>
  <li>SURF trigger band mask; displayed in TrigMon on 'RF Power' tab,
configuration bytes (actually shorts) are displayed. Additionally, if
an RF channel was masked, its background in 'Scaler' and 'Threshold'
tabs will be dark gray instead of black. <br>
  </li>
  <li>TURF upper word; displayed in Aview under 'Trigger Info', each
bit is shown as either '0' or '1', starting with most significant</li>
  <li>SURF mask; displayed in Aview under 'Trigger Info', each active
SURF is marked with '1', inactive with '0', starting with SURF 1</li>
  <li>Antenna trigger mask; displayed in Aview under 'Header Info', if
antenna is masked it's number is shown, if no antenna masked 'None' is
written<br>
  </li>
</ul>
<h3><a name="GPS data|outline"></a>GPS data</h3>
GPS receivers provide a lot of information that is impossible to fit in
the main Aview window. Thus, only most crucial info like location,
orientation and speed is shown under 'Header Info'. The rest of GPS
data is in a subwindow accessed through 'Control'-&gt;'GPS data', while
GPS satellite info is under 'Control'-&gt;'GPS satellite'. <br>
<h3><a name="timeconversion"></a>Time conversion tool</h3>
Time conversion tool is accessed through 'Control'-&gt;'Convert time'.
It converts between UTC time and UNIX time in seconds since epoch.
Enter the time you want to convert into the appropriate field and click
on a button to convert into the other time format.<br>
<br>
<hr style="width: 100%; height: 2px;"><br>
<p><br>
<br>
</p>
<p><br>
<br>
</p>
</body>
</html>
